<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6366f1">
    <title>Video Clipper</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Header -->
    <header class="app-header">
        <h1 class="app-title">Video Clipper</h1>
    </header>

    <!-- Main Content Area -->
    <main class="app-main">

        <!-- STEP 1: Video Selection -->
        <section id="step1" class="step-section active">
            <div class="step-content">
                <input type="file" id="videoInput" accept="video/*" style="display: none;">
                <button id="selectVideoBtn" class="btn-primary btn-large">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
                        <circle cx="12" cy="13" r="4" />
                    </svg>
                    Pilih Video
                </button>

                <!-- Selected video info (hidden until video selected) -->
                <div id="selectedVideoInfo" class="selected-video-info hidden">
                    <p class="info-label">Video yang dipilih:</p>
                    <div class="video-info-row">
                        <img id="videoThumbnail" class="video-thumbnail" src="" alt="thumbnail">
                        <span id="videoFilename" class="video-filename">-</span>
                    </div>
                </div>

                <!-- Output folder selector -->
                <div class="output-folder-section">
                    <p class="info-label">Folder Output:</p>
                    <div class="folder-row">
                        <span id="outputFolderDisplay" class="folder-path">/Movies/Klipper</span>
                        <button id="changeFolderBtn" class="btn-secondary btn-small">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
                            </svg>
                            Ganti
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STEP 2: Timestamp Input -->
        <section id="step2" class="step-section">
            <div class="step-content">
                <h2 class="step-title">Masukkan Timestamp</h2>
                <p class="step-description">Format: HH:MM:SS - HH:MM:SS atau MM:SS - MM:SS<br>Maksimal 20 bagian</p>

                <textarea id="timestampInput" class="textarea-large"
                    placeholder="00:01:04 - 00:01:20&#10;00:02:05 - 00:02:14&#10;00:03:10 - 00:03:25"
                    rows="10"></textarea>

                <div id="timestampError" class="error-message hidden"></div>
            </div>
        </section>

        <!-- STEP 3: Preview & Editing -->
        <section id="step3" class="step-section">
            <div class="step-content step3-layout">
                <!-- Video Preview and Watermark Row -->
                <div class="preview-watermark-row">
                    <!-- Video Preview -->
                    <div class="preview-video">
                        <div class="video-wrapper aspect-9-16 video-small">
                            <video id="videoPreview3" class="video-element"></video>
                            <div id="watermarkOverlay3" class="watermark-overlay hidden"></div>
                        </div>

                        <!-- Video Controls -->
                        <div class="video-controls">
                            <input type="range" id="videoTimeline" class="timeline-slider" min="0" max="100" value="0">
                            <div class="video-time-display">
                                <span id="currentTime">00:00</span> / <span id="totalTime">00:00</span>
                            </div>
                            <div class="control-buttons">
                                <button id="skipBackward" class="control-btn" title="-5 detik">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z" />
                                    </svg>
                                </button>
                                <button id="playPauseBtn" class="control-btn play-pause" title="Play/Pause">
                                    <svg id="playIcon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M8 5v14l11-7z" />
                                    </svg>
                                    <svg id="pauseIcon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"
                                        class="hidden">
                                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                                    </svg>
                                </button>
                                <button id="stopBtn" class="control-btn" title="Stop">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M6 6h12v12H6z" />
                                    </svg>
                                </button>
                                <button id="skipForward" class="control-btn" title="+5 detik">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Watermark Panel -->
                    <div class="watermark-panel">
                        <label class="watermark-toggle">
                            <input type="checkbox" id="watermarkToggle">
                            <span class="toggle-label">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 2L2 7l10 5 10-5-10-5z" />
                                    <path d="M2 17l10 5 10-5M2 12l10 5 10-5" />
                                </svg>
                                Watermark
                            </span>
                        </label>

                        <div id="watermarkOptions" class="watermark-options hidden">
                            <input type="text" id="watermarkText" class="input-text"
                                placeholder="Masukkan teks watermark">

                            <div class="position-selector">
                                <label>Posisi:</label>
                                <select id="watermarkPosition" class="select-input">
                                    <option value="center" selected>Center</option>
                                    <option value="top">Top</option>
                                    <option value="bottom">Bottom</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Parts List -->
                <div class="parts-section">
                    <h3 class="parts-title">Daftar Part</h3>
                    <div id="partsList" class="parts-list">
                        <!-- Parts will be added dynamically -->
                    </div>
                </div>
            </div>
        </section>

        <!-- STEP 4: Processing -->
        <section id="step4" class="step-section">
            <div class="step-content">
                <h2 class="step-title">Processing Video</h2>

                <div class="processing-info">
                    <div class="progress-container">
                        <div id="progressBar" class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                        <div id="progressText" class="progress-text">0%</div>
                    </div>

                    <div class="info-row">
                        <span class="info-label">Klip Selesai:</span>
                        <span id="clipsCompleted" class="info-value">0 / 0</span>
                    </div>

                    <div class="info-row">
                        <span class="info-label">Status:</span>
                        <span id="processStatus" class="info-value">Siap</span>
                    </div>

                    <div class="info-row">
                        <span class="info-label">Lokasi Hasil:</span>
                        <span id="outputPath" class="info-value path">-</span>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button id="backBtn" class="nav-btn hidden">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            Kembali
        </button>

        <div class="step-indicator">
            <span class="step-dot" data-step="1"></span>
            <span class="step-dot" data-step="2"></span>
            <span class="step-dot" data-step="3"></span>
            <span class="step-dot" data-step="4"></span>
        </div>

        <button id="nextBtn" class="nav-btn hidden">
            Lanjut
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7" />
            </svg>
        </button>
    </nav>

    <!-- Confirmation Dialog -->
    <div id="confirmDialog" class="dialog-overlay hidden">
        <div class="dialog-content">
            <h3 class="dialog-title">Batalkan Proses?</h3>
            <p class="dialog-message">Apakah Anda yakin ingin membatalkan proses ini?</p>
            <div class="dialog-actions">
                <button id="cancelNo" class="btn-secondary">Tidak</button>
                <button id="cancelYes" class="btn-danger">Ya, Batalkan</button>
            </div>
        </div>
    </div>

    <!-- Edit Part Dialog -->
    <div id="editDialog" class="dialog-overlay hidden">
        <div class="dialog-content">
            <h3 class="dialog-title">Edit Part</h3>
            <div class="edit-form">
                <div class="form-group">
                    <label>Mulai:</label>
                    <input type="text" id="editStart" class="input-text" placeholder="00:01:04">
                </div>
                <div class="form-group">
                    <label>Selesai:</label>
                    <input type="text" id="editEnd" class="input-text" placeholder="00:01:20">
                </div>
            </div>
            <div class="dialog-actions">
                <button id="editCancel" class="btn-secondary">Batal</button>
                <button id="editSave" class="btn-primary">Simpan</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>